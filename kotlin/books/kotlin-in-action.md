## Kotlin: what and why

能够展现 Kotlin 特性的一段代码

* Data class
* Autogenerated toString
* Top-level function
* String template
* Nullable type
* Named argument
* Lambda expression
* Elvis operator

```kotlin
data class Person(val name: String,
                  val age: Int? = null)

fun main(args: Array<String>) {
    val persons = listOf(Person("Alice"),
                         Person("Bob", age = 29))

    val oldest = persons.maxBy { it.age ?: 0}
    println("The oldest is: $oldest")
}
```

**Some of the benefits of static typing:**
* *Performance* - Calling methods is faster because there's no need to figure out at runtime which method needs to be called.
* *Reliability* - The compiler verifies the correctness of the program, so there are fewer chances for crashes at runtime.
* *Maintainability* - Working with unfamiliar code is easier because you can see what kind of objects the code is working with.
* *Tool support* - Static typing enables reliable refactorings, precise code completion, and other IDE features.

**The key concepts of functional programming:**
* *First-class functions*
* *Immutability* - You work with immutable objects, which guarantees that their state can't change after their creation.
* *No side effects* - You use pure functions that return the same result given the same inputs and don't modify the state of other objects or interact with the outside world.

**Benefits of functional programming**
* *Conciseness* - Working with functions as values gives you much more power of abstraction.
* *Safe multithreading*
* *Easire testing*

**Kotlin has a rich set of features to support functional programming from the get-to**
* Function types
* Lambda expressions
* Data classes, providing a concise syntax for creating immutable value objects
* A rich set of APIs in the standard library for working with objects and collections in the functional style


### Kotlin on the server side

* Web applications that return HTML pages to a browser
* Backends of mobile applications that expose a JSON API over HTTP
* Microservices that communicate with other microservices over an RPC protocol

```kotlin
fun renderPersonList(persons: Collection<Person>) = 
    createHTML().table {
        for (person in persons) {
            tr {
                td { +person.name }
                td { +person.age }
            }
        }
    }
```

### The philosophy of Kotlin

When we talk about Kotlin, we like to say that it's a pragmatic, concise, safe language with a focus on interoperability.

* Pragmatic
* Concise
    * It's common knowledge that developers spend more time reading existing code than writing new code.
    * In Kotlin, we've tried hard to ensure that all the code you write carries meaning and isn't just there to satisfy code structure requirements.
* Safe
    * `NullPointerException`
    * `ClassCastException`
* Interoperable

---

```
kotlinc <source file or directory> -include-runtime -d <jar name>
java -jar <jar name>
```

Code compiled with the Kotlin compiler depends on the *Kotlin runtime library*. It contains the definitions of Kotlin's own standard library classes and the extensions that Kotlin adds to the standard Java APIs.

---

## Kotlin basics

assignments are expressions in Java and become statements in Kotlin.

* mutable and immutable reference
* mutable and immutable object

the last expression in the block is the result.

---

* downTo
* step
* until

---

## Defining and calling functions

If you specify the name of an argument in a call, you should also specify the names for all the arguments after that, to avoid confusion.

## Programming with lambdas

*Lambda expressions*, or simply *lambdas*, are essentially small chunks of code that can be passed to other functions.
